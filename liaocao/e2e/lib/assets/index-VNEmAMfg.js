import{u as bn,v as wn,j as M,w as kn,x as Ie,l as yt,i as de,y as Cn,P as re,S as v,z as yn,T as B,F as L,A as j,B as xn,a as Le,C as xt,G as St,N as Sn,H as An,I as G,J as be,K as At,L as Rn,O as Rt,Q as _e,R as Tn,$ as Pe,U as Mn,V as Nn,W as Dn,X as Z,Y as Oe,Z as oe,_ as Tt,a0 as $e,a1 as ne,a2 as N,a3 as vn,a4 as O,a5 as Fn,a6 as xe,a7 as zn,a8 as rt,a9 as te,aa as V,ab as En,ac as In}from"./utils-kAulCAqd.js";import{o as Q}from"./default-QVBxBFzO.js";function Ln(e){return t=>{for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r)){const o=t.before(n),i=t.after(n);return{from:o,to:i,node:r}}}}}function _n(e,t){return Ln(n=>n.type===t)(e)}function k(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-gfm",...t}}),e}const Be=bn("strike_through");k(Be,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const le=wn("strike_through",e=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:t=>["del",e.get(Be.key)(t)],parseMarkdown:{match:t=>t.type==="delete",runner:(t,n,r)=>{t.openMark(r),t.next(n.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name==="strike_through",runner:(t,n)=>{t.withMark(n,"delete")}}}));k(le.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});k(le.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const je=M("ToggleStrikeThrough",e=>()=>kn(le.type(e)));k(je,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const Mt=Ie(e=>Cn(/~([^~]+)~$/,le.type(e)));k(Mt,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const He=yt("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:e=>{const t=e.get(de);return()=>t.call(je.key)}}});k(He.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});k(He.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});var ve,Fe;if(typeof WeakMap<"u"){let e=new WeakMap;ve=t=>e.get(t),Fe=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;ve=r=>{for(let o=0;o<e.length;o+=2)if(e[o]==r)return e[o+1]},Fe=(r,o)=>(n==10&&(n=0),e[n++]=r,e[n++]=o)}var x=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,l=o+1;for(let s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(let s=1;l<this.height&&this.map[t+this.width*s]==n;s++)l++;return{left:r,top:o,right:i,bottom:l}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:l}=this.findCell(e);return t=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:l==this.height)?null:this.map[r+this.width*(n<0?i-1:l)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:l,right:s,top:a,bottom:c}=this.findCell(t);return{left:Math.min(n,l),top:Math.min(o,a),right:Math.max(r,s),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,l=this.map[i];n[l]||(n[l]=!0,!(o==e.left&&o&&this.map[i-1]==l||r==e.top&&r&&this.map[i-this.width]==l)&&t.push(l))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let l=t+e*this.width;const s=(e+1)*this.width;for(;l<s&&this.map[l]<o;)l++;return l==s?i-1:this.map[l]}o=i}}static get(e){return ve(e)||Fe(e,Pn(e))}};function Pn(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=On(e),n=e.childCount,r=[];let o=0,i=null;const l=[];for(let c=0,f=t*n;c<f;c++)r[c]=0;for(let c=0,f=0;c<n;c++){const u=e.child(c);f++;for(let h=0;;h++){for(;o<r.length&&r[o]!=0;)o++;if(h==u.childCount)break;const b=u.child(h),{colspan:g,rowspan:w,colwidth:C}=b.attrs;for(let y=0;y<w;y++){if(y+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:f,n:w-y});break}const A=o+y*t;for(let R=0;R<g;R++){r[A+R]==0?r[A+R]=f:(i||(i=[])).push({type:"collision",row:c,pos:f,n:g-R});const T=C&&C[R];if(T){const z=(A+R)%t*2,P=l[z];P==null||P!=T&&l[z+1]==1?(l[z]=T,l[z+1]=1):P==T&&l[z+1]++}}}o+=g,f+=b.nodeSize}const p=(c+1)*t;let d=0;for(;o<p;)r[o++]==0&&d++;d&&(i||(i=[])).push({type:"missing",row:c,n:d}),f++}const s=new x(t,n,r,i);let a=!1;for(let c=0;!a&&c<l.length;c+=2)l[c]!=null&&l[c+1]<n&&(a=!0);return a&&$n(s,l,e),s}function On(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let l=0;l<r;l++){const s=e.child(l);for(let a=0;a<s.childCount;a++){const c=s.child(a);l+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let l=0;l<o.childCount;l++){const s=o.child(l);i+=s.attrs.colspan,s.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function $n(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const l=n.nodeAt(i);if(!l)throw new RangeError(`No cell with offset ${i} found`);let s=null;const a=l.attrs;for(let c=0;c<a.colspan;c++){const f=(o+c)%e.width,u=t[f*2];u!=null&&(!a.colwidth||a.colwidth[c]!=u)&&((s||(s=Bn(a)))[c]=u)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}function Bn(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ot(e,t){if(typeof e=="string")return{};const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(l=>Number(l)):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const l in t){const s=t[l].getFromDOM,a=s&&s(e);a!=null&&(i[l]=a)}return i}function lt(e,t){const n={};e.attrs.colspan!=1&&(n.colspan=e.attrs.colspan),e.attrs.rowspan!=1&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function jn(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>ot(r,t)}],toDOM(r){return["td",lt(r,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>ot(r,t)}],toDOM(r){return["th",lt(r,t),0]}}}}function F(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var $=new re("selectingCells");function we(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function D(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function ke(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=we(t.$head)||Hn(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function Hn(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function it(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Wn(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function We(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Nt(e,t,n){const r=e.node(-1),o=x.get(r),i=e.start(-1),l=o.nextCell(e.pos-i,t,n);return l==null?null:e.node(0).resolve(i+l)}function K(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function Kn(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function Gn(e,t,n){const r=F(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var S=class I extends v{constructor(t,n=t){const r=t.node(-1),o=x.get(r),i=t.start(-1),l=o.rectBetween(t.pos-i,n.pos-i),s=t.node(0),a=o.cellsInRect(l).filter(f=>f!=n.pos-i);a.unshift(n.pos-i);const c=a.map(f=>{const u=r.nodeAt(f);if(!u)throw RangeError(`No cell with offset ${f} found`);const p=i+f+1;return new yn(s.resolve(p),s.resolve(p+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(it(r)&&it(o)&&We(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?I.rowSelection(r,o):i&&this.isColSelection()?I.colSelection(r,o):new I(r,o)}return B.between(r,o)}content(){const t=this.$anchorCell.node(-1),n=x.get(t),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},l=[];for(let a=o.top;a<o.bottom;a++){const c=[];for(let f=a*n.width+o.left,u=o.left;u<o.right;u++,f++){const p=n.map[f];if(i[p])continue;i[p]=!0;const d=n.findCell(p);let h=t.nodeAt(p);if(!h)throw RangeError(`No cell with offset ${p} found`);const b=o.left-d.left,g=d.right-o.right;if(b>0||g>0){let w=h.attrs;if(b>0&&(w=K(w,0,b)),g>0&&(w=K(w,w.colspan-g,g)),d.left<o.left){if(h=h.type.createAndFill(w),!h)throw RangeError(`Could not create cell with attrs ${JSON.stringify(w)}`)}else h=h.type.create(w,h.content)}if(d.top<o.top||d.bottom>o.bottom){const w={...h.attrs,rowspan:Math.min(d.bottom,o.bottom)-Math.max(d.top,o.top)};d.top<o.top?h=h.type.createAndFill(w):h=h.type.create(w,h.content)}c.push(h)}l.push(t.child(a).copy(L.from(c)))}const s=this.isColSelection()&&this.isRowSelection()?t:l;return new j(L.from(s),1,1)}replace(t,n=j.empty){const r=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){const{$from:s,$to:a}=o[l],c=t.mapping.slice(r);t.replace(c.map(s.pos),c.map(a.pos),l?j.empty:n)}const i=v.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);i&&t.setSelection(i)}replaceWith(t,n){this.replace(t,new j(L.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=x.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let l=0;l<i.length;l++)t(n.nodeAt(i[l]),o+i[l])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),o=x.get(r),i=t.start(-1),l=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return l.top<=s.top?(l.top>0&&(t=a.resolve(i+o.map[l.left])),s.bottom<o.height&&(n=a.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+o.map[s.left])),l.bottom<o.height&&(t=a.resolve(i+o.map[o.width*(o.height-1)+l.right-1]))),new I(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=x.get(t),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const l=o+this.$anchorCell.nodeAfter.attrs.colspan,s=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,s)==n.width}eq(t){return t instanceof I&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),o=x.get(r),i=t.start(-1),l=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return l.left<=s.left?(l.left>0&&(t=a.resolve(i+o.map[l.top*o.width])),s.right<o.width&&(n=a.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+o.map[s.top*o.width])),l.right<o.width&&(t=a.resolve(i+o.map[o.width*(l.top+1)-1]))),new I(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new I(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new I(t.resolve(n),t.resolve(r))}getBookmark(){return new Vn(this.$anchorCell.pos,this.$headCell.pos)}};S.prototype.visible=!1;v.jsonID("cell",S);var Vn=class Dt{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Dt(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&We(n,r)?new S(n,r):v.near(r,1)}};function qn(e){if(!(e.selection instanceof S))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(xt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),St.create(e.doc,t)}function Un({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function Jn({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&t.parentOffset===0}function Xn(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,l;if(r instanceof Sn&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")i=S.create(o,r.from);else if(l=="row"){const s=o.resolve(r.from+1);i=S.rowSelection(s,s)}else if(!n){const s=x.get(r.node),a=r.from+1,c=a+s.map[s.width*s.height-1];i=S.create(o,a+1,c)}}else r instanceof B&&Un(r)?i=B.create(o,r.from):r instanceof B&&Jn(r)&&(i=B.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var Zn=new re("fix-tables");function vt(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let l=0,s=0;l<i;l++){const a=t.child(l);for(let c=s,f=Math.min(o,l+3);c<f;c++)if(e.child(c)==a){s=c+1,n+=a.nodeSize;continue e}r(a,n),s<o&&e.child(s).sameMarkup(a)?vt(e.child(s),a,n+1,r):a.nodesBetween(0,a.content.size,r,n+1),n+=a.nodeSize}}function Qn(e,t){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=Yn(e,o,i,n))};return t?t.doc!=e.doc&&vt(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Yn(e,t,n,r){const o=x.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let a=0;a<o.height;a++)i.push(0);for(let a=0;a<o.problems.length;a++){const c=o.problems[a];if(c.type=="collision"){const f=t.nodeAt(c.pos);if(!f)continue;const u=f.attrs;for(let p=0;p<u.rowspan;p++)i[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,K(u,u.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const f=t.nodeAt(c.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const f=t.nodeAt(c.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...f.attrs,colwidth:c.colwidth})}}let l,s;for(let a=0;a<i.length;a++)i[a]&&(l==null&&(l=a),s=a);for(let a=0,c=n+1;a<o.height;a++){const f=t.child(a),u=c+f.nodeSize,p=i[a];if(p>0){let d="cell";f.firstChild&&(d=f.firstChild.type.spec.tableRole);const h=[];for(let g=0;g<p;g++){const w=F(e.schema)[d].createAndFill();w&&h.push(w)}const b=(a==0||l==a-1)&&s==a?c+1:u-1;r.insert(r.mapping.map(b),h)}c=u}return r.setMeta(Zn,{fixTables:!0})}function er(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,l=o.type.schema,s=[];if(i=="row")for(let a=0;a<t.childCount;a++){let c=t.child(a).content;const f=a?0:Math.max(0,n-1),u=a<t.childCount-1?0:Math.max(0,r-1);(f||u)&&(c=ze(F(l).row,new j(c,f,u)).content),s.push(c)}else if(i=="cell"||i=="header_cell")s.push(n||r?ze(F(l).row,new j(t,n,r)).content:t);else return null;return tr(l,s)}function tr(e,t){const n=[];for(let o=0;o<t.length;o++){const i=t[o];for(let l=i.childCount-1;l>=0;l--){const{rowspan:s,colspan:a}=i.child(l).attrs;for(let c=o;c<o+s;c++)n[c]=(n[c]||0)+a}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(L.empty),n[o]<r){const i=F(e).cell.createAndFill(),l=[];for(let s=n[o];s<r;s++)l.push(i);t[o]=t[o].append(L.from(l))}return{height:t.length,width:r,rows:t}}function ze(e,t){const n=e.createAndFill();return new An(n).replace(0,n.content.size,t).doc}function nr({width:e,height:t,rows:n},r,o){if(e!=r){const i=[],l=[];for(let s=0;s<n.length;s++){const a=n[s],c=[];for(let f=i[s]||0,u=0;f<r;u++){let p=a.child(u%a.childCount);f+p.attrs.colspan>r&&(p=p.type.createChecked(K(p.attrs,p.attrs.colspan,f+p.attrs.colspan-r),p.content)),c.push(p),f+=p.attrs.colspan;for(let d=1;d<p.attrs.rowspan;d++)i[s+d]=(i[s+d]||0)+p.attrs.colspan}l.push(L.from(c))}n=l,e=r}if(t!=o){const i=[];for(let l=0,s=0;l<o;l++,s++){const a=[],c=n[s%t];for(let f=0;f<c.childCount;f++){let u=c.child(f);l+u.attrs.rowspan>o&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,o-u.attrs.rowspan)},u.content)),a.push(u)}i.push(L.from(a))}n=i,t=o}return{width:e,height:t,rows:n}}function rr(e,t,n,r,o,i,l){const s=e.doc.type.schema,a=F(s);let c,f;if(o>t.width)for(let u=0,p=0;u<t.height;u++){const d=n.child(u);p+=d.nodeSize;const h=[];let b;d.lastChild==null||d.lastChild.type==a.cell?b=c||(c=a.cell.createAndFill()):b=f||(f=a.header_cell.createAndFill());for(let g=t.width;g<o;g++)h.push(b);e.insert(e.mapping.slice(l).map(p-1+r),h)}if(i>t.height){const u=[];for(let h=0,b=(t.height-1)*t.width;h<Math.max(t.width,o);h++){const g=h>=t.width?!1:n.nodeAt(t.map[b+h]).type==a.header_cell;u.push(g?f||(f=a.header_cell.createAndFill()):c||(c=a.cell.createAndFill()))}const p=a.row.create(null,L.from(u)),d=[];for(let h=t.height;h<i;h++)d.push(p);e.insert(e.mapping.slice(l).map(r+n.nodeSize-2),d)}return!!(c||f)}function st(e,t,n,r,o,i,l,s){if(l==0||l==t.height)return!1;let a=!1;for(let c=o;c<i;c++){const f=l*t.width+c,u=t.map[f];if(t.map[f-t.width]==u){a=!0;const p=n.nodeAt(u),{top:d,left:h}=t.findCell(u);e.setNodeMarkup(e.mapping.slice(s).map(u+r),null,{...p.attrs,rowspan:l-d}),e.insert(e.mapping.slice(s).map(t.positionAt(l,h,n)),p.type.createAndFill({...p.attrs,rowspan:d+p.attrs.rowspan-l})),c+=p.attrs.colspan-1}}return a}function at(e,t,n,r,o,i,l,s){if(l==0||l==t.width)return!1;let a=!1;for(let c=o;c<i;c++){const f=c*t.width+l,u=t.map[f];if(t.map[f-1]==u){a=!0;const p=n.nodeAt(u),d=t.colCount(u),h=e.mapping.slice(s).map(u+r);e.setNodeMarkup(h,null,K(p.attrs,l-d,p.attrs.colspan-(l-d))),e.insert(h+p.nodeSize,p.type.createAndFill(K(p.attrs,0,l-d))),c+=p.attrs.rowspan-1}}return a}function ct(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let l=x.get(i);const{top:s,left:a}=r,c=a+o.width,f=s+o.height,u=e.tr;let p=0;function d(){if(i=n?u.doc.nodeAt(n-1):u.doc,!i)throw new Error("No table found");l=x.get(i),p=u.mapping.maps.length}rr(u,l,i,n,c,f,p)&&d(),st(u,l,i,n,a,c,s,p)&&d(),st(u,l,i,n,a,c,f,p)&&d(),at(u,l,i,n,s,f,a,p)&&d(),at(u,l,i,n,s,f,c,p)&&d();for(let h=s;h<f;h++){const b=l.positionAt(h,a,i),g=l.positionAt(h,c,i);u.replace(u.mapping.slice(p).map(b+n),u.mapping.slice(p).map(g+n),new j(o.rows[h-s],0,0))}d(),u.setSelection(new S(u.doc.resolve(n+l.positionAt(s,a,i)),u.doc.resolve(n+l.positionAt(f-1,c-1,i)))),t(u)}var or=xn({ArrowLeft:ue("horiz",-1),ArrowRight:ue("horiz",1),ArrowUp:ue("vert",-1),ArrowDown:ue("vert",1),"Shift-ArrowLeft":fe("horiz",-1),"Shift-ArrowRight":fe("horiz",1),"Shift-ArrowUp":fe("vert",-1),"Shift-ArrowDown":fe("vert",1),Backspace:he,"Mod-Backspace":he,Delete:he,"Mod-Delete":he});function me(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function ue(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof S)return me(n,r,v.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;const l=Ft(o,e,t);if(l==null)return!1;if(e=="horiz")return me(n,r,v.near(n.doc.resolve(i.head+t),t));{const s=n.doc.resolve(l),a=Nt(s,e,t);let c;return a?c=v.near(a,1):t<0?c=v.near(n.doc.resolve(s.before(-1)),-1):c=v.near(n.doc.resolve(s.after(-1)),1),me(n,r,c)}}}function fe(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let l;if(i instanceof S)l=i;else{const a=Ft(o,e,t);if(a==null)return!1;l=new S(n.doc.resolve(a))}const s=Nt(l.$headCell,e,t);return s?me(n,r,new S(l.$anchorCell,s)):!1}}function he(e,t){const n=e.selection;if(!(n instanceof S))return!1;if(t){const r=e.tr,o=F(e.schema).cell.createAndFill().content;n.forEachCell((i,l)=>{i.content.eq(o)||r.replace(r.mapping.map(l+1),r.mapping.map(l+i.nodeSize-1),new j(o,0,0))}),r.docChanged&&t(r)}return!0}function lr(e,t){const n=e.state.doc,r=we(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new S(r))),!0):!1}function ir(e,t,n){if(!D(e.state))return!1;let r=er(n);const o=e.state.selection;if(o instanceof S){r||(r={width:1,height:1,rows:[L.from(ze(F(e.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),l=o.$anchorCell.start(-1),s=x.get(i).rectBetween(o.$anchorCell.pos-l,o.$headCell.pos-l);return r=nr(r,s.right-s.left,s.bottom-s.top),ct(e.state,e.dispatch,l,s,r),!0}else if(r){const i=ke(e.state),l=i.start(-1);return ct(e.state,e.dispatch,l,x.get(i.node(-1)).findCell(i.pos-l),r),!0}else return!1}function sr(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=ut(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof S)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(o=we(e.state.selection.$anchor))!=null&&((n=Se(e,t))==null?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(a,c){let f=Se(e,c);const u=$.getState(e.state)==null;if(!f||!We(a,f))if(u)f=a;else return;const p=new S(a,f);if(u||!e.state.selection.eq(p)){const d=e.state.tr.setSelection(p);u&&d.setMeta($,a.pos),e.dispatch(d)}}function l(){e.root.removeEventListener("mouseup",l),e.root.removeEventListener("dragstart",l),e.root.removeEventListener("mousemove",s),$.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta($,-1))}function s(a){const c=a,f=$.getState(e.state);let u;if(f!=null)u=e.state.doc.resolve(f);else if(ut(e,c.target)!=r&&(u=Se(e,t),!u))return l();u&&i(u,c)}e.root.addEventListener("mouseup",l),e.root.addEventListener("dragstart",l),e.root.addEventListener("mousemove",s)}function Ft(e,t,n){if(!(e.state.selection instanceof B))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const s=r.before(o),a=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?s:null}}return null}function ut(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function Se(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?we(e.state.doc.resolve(n.pos)):null}new re("tableColumnResizing");function H(e){const t=e.selection,n=ke(e),r=n.node(-1),o=n.start(-1),i=x.get(r);return{...t instanceof S?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function zt(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;Gn(t,r,o+i)&&(i=o==0||o==t.width?null:0);for(let l=0;l<t.height;l++){const s=l*t.width+o;if(o>0&&o<t.width&&t.map[s-1]==t.map[s]){const a=t.map[s],c=r.nodeAt(a);e.setNodeMarkup(e.mapping.map(n+a),null,Kn(c.attrs,o-t.colCount(a))),l+=c.attrs.rowspan-1}else{const a=i==null?F(r.type.schema).cell:r.nodeAt(t.map[s+i]).type,c=t.positionAt(l,o,r);e.insert(e.mapping.map(n+c),a.createAndFill())}}return e}function ar(e,t){if(!D(e))return!1;if(t){const n=H(e);t(zt(e.tr,n,n.left))}return!0}function cr(e,t){if(!D(e))return!1;if(t){const n=H(e);t(zt(e.tr,n,n.right))}return!0}function ur(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let l=0;l<t.height;){const s=l*t.width+o,a=t.map[s],c=n.nodeAt(a),f=c.attrs;if(o>0&&t.map[s-1]==a||o<t.width-1&&t.map[s+1]==a)e.setNodeMarkup(e.mapping.slice(i).map(r+a),null,K(f,o-t.colCount(a)));else{const u=e.mapping.slice(i).map(r+a);e.delete(u,u+c.nodeSize)}l+=f.rowspan}}function fr(e,t){if(!D(e))return!1;if(t){const n=H(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;ur(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=x.get(i)}t(r)}return!0}function hr(e,{map:t,table:n,tableStart:r},o){let i=0;for(let c=0;c<o;c++)i+=n.child(c).nodeSize;const l=i+n.child(o).nodeSize,s=e.mapping.maps.length;e.delete(i+r,l+r);const a=new Set;for(let c=0,f=o*t.width;c<t.width;c++,f++){const u=t.map[f];if(!a.has(u)){if(a.add(u),o>0&&u==t.map[f-t.width]){const p=n.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(s).map(u+r),null,{...p,rowspan:p.rowspan-1}),c+=p.colspan-1}else if(o<t.height&&u==t.map[f+t.width]){const p=n.nodeAt(u),d=p.attrs,h=p.type.create({...d,rowspan:p.attrs.rowspan-1},p.content),b=t.positionAt(o+1,c,n);e.insert(e.mapping.slice(s).map(r+b),h),c+=d.colspan-1}}}}function pr(e,t){if(!D(e))return!1;if(t){const n=H(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;hr(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=x.get(n.table)}t(r)}return!0}function dr(e,t){return function(n,r){if(!D(n))return!1;const o=ke(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){const i=n.tr;n.selection instanceof S?n.selection.forEachCell((l,s)=>{l.attrs[e]!==t&&i.setNodeMarkup(s,null,{...l.attrs,[e]:t})}):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),r(i)}return!0}}function mr(e){return function(t,n){if(!D(t))return!1;if(n){const r=F(t.schema),o=H(t),i=t.tr,l=o.map.cellsInRect(e=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:e=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),s=l.map(a=>o.table.nodeAt(a));for(let a=0;a<l.length;a++)s[a].type==r.header_cell&&i.setNodeMarkup(o.tableStart+l[a],r.cell,s[a].attrs);if(i.steps.length==0)for(let a=0;a<l.length;a++)i.setNodeMarkup(o.tableStart+l[a],r.header_cell,s[a].attrs);n(i)}return!0}}function ft(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<r.length;o++){const i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Ke(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?mr(e):function(n,r){if(!D(n))return!1;if(r){const o=F(n.schema),i=H(n),l=n.tr,s=ft("row",i,o),a=ft("column",i,o),f=(e==="column"?s:e==="row"?a:!1)?1:0,u=e=="column"?{left:0,top:f,right:1,bottom:i.map.height}:e=="row"?{left:f,top:0,right:i.map.width,bottom:1}:i,p=e=="column"?a?o.cell:o.header_cell:e=="row"?s?o.cell:o.header_cell:o.cell;i.map.cellsInRect(u).forEach(d=>{const h=d+i.tableStart,b=l.doc.nodeAt(h);b&&l.setNodeMarkup(h,p,b.attrs)}),r(l)}return!0}}Ke("row",{useDeprecatedLogic:!0});Ke("column",{useDeprecatedLogic:!0});Ke("cell",{useDeprecatedLogic:!0});function gr(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,o=e.before();r>=0;r--){const i=e.node(-1).child(r),l=i.lastChild;if(l)return o-1-l.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),o=e.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function Et(e){return function(t,n){if(!D(t))return!1;const r=gr(ke(t),e);if(r==null)return!1;if(n){const o=t.doc.resolve(r);n(t.tr.setSelection(B.between(o,Wn(o))).scrollIntoView())}return!0}}function br(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function wr({allowTableNodeSelection:e=!1}={}){return new Le({key:$,state:{init(){return null},apply(t,n){const r=t.getMeta($);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:o,pos:i}=t.mapping.mapResult(n);return o?null:i}},props:{decorations:qn,handleDOMEvents:{mousedown:sr},createSelectionBetween(t){return $.getState(t.state)!=null?t.state.selection:null},handleTripleClick:lr,handleKeyDown:or,handlePaste:ir},appendTransaction(t,n,r){return Xn(r,Qn(r,n),e)}})}const ie=jn({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}}),Y=G("table",()=>({...ie.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="table",runner:(e,t,n)=>{const r=t.align,o=t.children.map((i,l)=>({...i,align:r,isHeader:l===0}));e.openNode(n),e.next(o),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table",runner:(e,t)=>{var o;const n=(o=t.content.firstChild)==null?void 0:o.content;if(!n)return;const r=[];n.forEach(i=>{r.push(i.attrs.alignment)}),e.openNode("table",void 0,{align:r}),e.next(t.content),e.closeNode()}}}));k(Y.node,{displayName:"NodeSchema<table>",group:"Table"});k(Y.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const Ce=G("table_header_row",()=>({...ie.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:e=>!!(e.type==="tableRow"&&e.isHeader),runner:(e,t,n)=>{const r=t.align,o=t.children.map((i,l)=>({...i,align:r[l],isHeader:t.isHeader}));e.openNode(n),e.next(o),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_header_row",runner:(e,t)=>{e.openNode("tableRow",void 0,{isHeader:!0}),e.next(t.content),e.closeNode()}}}));k(Ce.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});k(Ce.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const se=G("table_row",()=>({...ie.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:e=>e.type==="tableRow",runner:(e,t,n)=>{const r=t.align,o=t.children.map((i,l)=>({...i,align:r[l]}));e.openNode(n),e.next(o),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_row",runner:(e,t)=>{e.openNode("tableRow"),e.next(t.content),e.closeNode()}}}));k(se.node,{displayName:"NodeSchema<tableRow>",group:"Table"});k(se.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const ae=G("table_cell",()=>({...ie.table_cell,disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="tableCell"&&!e.isHeader,runner:(e,t,n)=>{const r=t.align;e.openNode(n,{alignment:r}).openNode(e.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},toMarkdown:{match:e=>e.type.name==="table_cell",runner:(e,t)=>{e.openNode("tableCell").next(t.content).closeNode()}}}));k(ae.node,{displayName:"NodeSchema<tableCell>",group:"Table"});k(ae.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const ye=G("table_header",()=>({...ie.table_header,disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="tableCell"&&!!e.isHeader,runner:(e,t,n)=>{const r=t.align;e.openNode(n,{alignment:r}),e.openNode(e.schema.nodes.paragraph),e.next(t.children),e.closeNode(),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_header",runner:(e,t)=>{e.openNode("tableCell"),e.next(t.content),e.closeNode()}}}));k(ye.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});k(ye.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function It(e,t=3,n=3){const r=Array(n).fill(0).map(()=>ae.type(e).createAndFill()),o=Array(n).fill(0).map(()=>ye.type(e).createAndFill()),i=Array(t).fill(0).map((l,s)=>s===0?Ce.type(e).create(null,o):se.type(e).create(null,r));return Y.type(e).create(null,i)}function ce(e){return At(t=>t.type.spec.tableRole==="table")(e)}function q(e,t){const n=ce(t.$from);if(!n)return;const r=x.get(n.node);if(!(e<0||e>=r.width))return r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height}).map(o=>{const i=n.node.nodeAt(o);if(!i)return;const l=o+n.start;return{pos:l,start:l+1,node:i}}).filter(o=>o!=null)}function U(e,t){const n=ce(t.$from);if(!n)return;const r=x.get(n.node);if(!(e<0||e>=r.height))return r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1}).map(o=>{const i=n.node.nodeAt(o);if(!i)return;const l=o+n.start;return{pos:l,start:l+1,node:i}}).filter(o=>o!=null)}function kr(e){const t=ce(e.$from);if(!t)return;const n=x.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(o=>{const i=t.node.nodeAt(o),l=o+t.start;return{pos:l,start:l+1,node:i}})}function Cr(e){const t=kr(e.selection);if(t&&t[0]){const n=e.doc.resolve(t[0].pos),r=t[t.length-1];if(r){const o=e.doc.resolve(r.pos);return be(e.setSelection(new S(o,n)))}}return e}function Lt(e,t,{map:n,tableStart:r,table:o},i){const l=Array(i).fill(0).reduce((a,c,f)=>a+o.child(f).nodeSize,r),s=Array(n.width).fill(0).map((a,c)=>{const f=o.nodeAt(n.map[c]);return ae.type(e).createAndFill({alignment:f==null?void 0:f.attrs.alignment})});return t.insert(l,se.type(e).create(null,s)),t}function _t(e){return(t,n)=>r=>{n=n??r.selection.from;const o=r.doc.resolve(n),i=At(a=>a.type.name==="table")(o),l=i?{node:i.node,from:i.start}:void 0,s=e==="row";if(l){const a=x.get(l.node);if(t>=0&&t<(s?a.height:a.width)){const c=a.positionAt(s?t:a.height-1,s?a.width-1:t,l.node),f=r.doc.resolve(l.from+c),u=s?S.rowSelection:S.colSelection,p=a.positionAt(s?t:0,s?0:t,l.node),d=r.doc.resolve(l.from+p);return be(r.setSelection(u(f,d)))}}return r}}const yr=_t("row"),xr=_t("col");function ht(e){return e[0].map((t,n)=>e.map(r=>r[n]))}function Pt(e,t){const n=[],r=x.get(e);for(let i=0;i<r.height;i++){const l=e.child(i),s=[];for(let a=0;a<r.width;a++){if(!t[i][a])continue;const c=r.map[i*r.width+a],f=t[i][a],p=e.nodeAt(c).type.createChecked(Object.assign({},f.attrs),f.content,f.marks);s.push(p)}n.push(l.type.createChecked(l.attrs,s,l.marks))}return e.type.createChecked(e.attrs,n,e.marks)}function Ot(e){const t=x.get(e),n=[];for(let r=0;r<t.height;r++){const o=[],i={};for(let l=0;l<t.width;l++){const s=t.map[r*t.width+l],a=e.nodeAt(s),c=t.findCell(s);if(i[s]||c.top!==r){o.push(null);continue}i[s]=!0,o.push(a)}n.push(o)}return n}function $t(e,t,n,r){const o=t[0]>n[0]?-1:1,i=e.splice(t[0],t.length),l=i.length%2===0?1:0;let s;return r===-1&&o===1?s=n[0]-1:r===1&&o===-1?s=n[n.length-1]-l+1:s=o===-1?n[0]:n[n.length-1]-l,e.splice(s,0,...i),e}function Sr(e,t,n,r){let o=ht(Ot(e.node));return o=$t(o,t,n,r),o=ht(o),Pt(e.node,o)}function Ar(e,t,n,r){let o=Ot(e.node);return o=$t(o,t,n,r),Pt(e.node,o)}function pt(e,t){let n=e,r=e;for(let f=e;f>=0;f--){const u=q(f,t.selection);u&&u.forEach(p=>{const d=p.node.attrs.colspan+f-1;d>=n&&(n=f),d>r&&(r=d)})}for(let f=e;f<=r;f++){const u=q(f,t.selection);u&&u.forEach(p=>{const d=p.node.attrs.colspan+f-1;p.node.attrs.colspan>1&&d>r&&(r=d)})}const o=[];for(let f=n;f<=r;f++){const u=q(f,t.selection);u&&u.length&&o.push(f)}n=o[0],r=o[o.length-1];const i=q(n,t.selection),l=U(0,t.selection),s=t.doc.resolve(i[i.length-1].pos);let a;for(let f=r;f>=n;f--){const u=q(f,t.selection);if(u&&u.length){for(let p=l.length-1;p>=0;p--)if(l[p].pos===u[0].pos){a=u[0];break}if(a)break}}const c=t.doc.resolve(a.pos);return{$anchor:s,$head:c,indexes:o}}function dt(e,t){let n=e,r=e;for(let f=e;f>=0;f--)U(f,t.selection).forEach(p=>{const d=p.node.attrs.rowspan+f-1;d>=n&&(n=f),d>r&&(r=d)});for(let f=e;f<=r;f++)U(f,t.selection).forEach(p=>{const d=p.node.attrs.rowspan+f-1;p.node.attrs.rowspan>1&&d>r&&(r=d)});const o=[];for(let f=n;f<=r;f++){const u=U(f,t.selection);u&&u.length&&o.push(f)}n=o[0],r=o[o.length-1];const i=U(n,t.selection),l=q(0,t.selection),s=t.doc.resolve(i[i.length-1].pos);let a;for(let f=r;f>=n;f--){const u=U(f,t.selection);if(u&&u.length){for(let p=l.length-1;p>=0;p--)if(l[p].pos===u[0].pos){a=u[0];break}if(a)break}}const c=t.doc.resolve(a.pos);return{$anchor:s,$head:c,indexes:o}}function Rr(e){const{tr:t,origin:n,target:r,select:o=!0,pos:i}=e,l=i!=null?t.doc.resolve(i):t.selection.$from,s=ce(l);if(!s)return t;const{indexes:a}=pt(n,t),{indexes:c}=pt(r,t);if(a.includes(r))return t;const f=Sr(s,a,c,0),u=be(t).replaceWith(s.pos,s.pos+s.node.nodeSize,f);if(!o)return u;const p=x.get(f),d=s.start,h=r,b=p.positionAt(p.height-1,h,f),g=u.doc.resolve(d+b),w=S.colSelection,C=p.positionAt(0,h,f),y=u.doc.resolve(d+C);return u.setSelection(w(g,y))}function Tr(e){const{tr:t,origin:n,target:r,select:o=!0,pos:i}=e,l=i!=null?t.doc.resolve(i):t.selection.$from,s=ce(l);if(!s)return t;const{indexes:a}=dt(n,t),{indexes:c}=dt(r,t);if(a.includes(r))return t;const f=Ar(s,a,c,0),u=be(t).replaceWith(s.pos,s.pos+s.node.nodeSize,f);if(!o)return u;const p=x.get(f),d=s.start,h=r,b=p.positionAt(h,p.width-1,f),g=u.doc.resolve(d+b),w=S.rowSelection,C=p.positionAt(h,0,f),y=u.doc.resolve(d+C);return u.setSelection(w(g,y))}const Ge=M("GoToPrevTableCell",()=>()=>Et(-1));k(Ge,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const Ve=M("GoToNextTableCell",()=>()=>Et(1));k(Ve,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const qe=M("ExitTable",e=>()=>(t,n)=>{if(!D(t))return!1;const{$head:r}=t.selection,o=_n(r,Y.type(e));if(!o)return!1;const{to:i}=o,l=t.tr.replaceWith(i,i,Rn.type(e).createAndFill());return l.setSelection(v.near(l.doc.resolve(i),1)).scrollIntoView(),n==null||n(l),!0});k(qe,{displayName:"Command<breakTableCommand>",group:"Table"});const Bt=M("InsertTable",e=>({row:t,col:n}={})=>(r,o)=>{const{selection:i,tr:l}=r,{from:s}=i,a=It(e,t,n),c=l.replaceSelectionWith(a),f=v.findFrom(c.doc.resolve(s),1,!0);return f&&c.setSelection(f),o==null||o(c),!0});k(Bt,{displayName:"Command<insertTableCommand>",group:"Table"});const jt=M("MoveRow",()=>({from:e,to:t,pos:n}={})=>(r,o)=>{const{tr:i}=r;return!!(o==null?void 0:o(Tr({tr:i,origin:e??0,target:t??0,pos:n,select:!0})))});k(jt,{displayName:"Command<moveRowCommand>",group:"Table"});const Ht=M("MoveCol",()=>({from:e,to:t,pos:n}={})=>(r,o)=>{const{tr:i}=r;return!!(o==null?void 0:o(Rr({tr:i,origin:e??0,target:t??0,pos:n,select:!0})))});k(Ht,{displayName:"Command<moveColCommand>",group:"Table"});const Wt=M("SelectRow",()=>(e={index:0})=>(t,n)=>{const{tr:r}=t;return!!(n==null?void 0:n(yr(e.index,e.pos)(r)))});k(Wt,{displayName:"Command<selectRowCommand>",group:"Table"});const Kt=M("SelectCol",()=>(e={index:0})=>(t,n)=>{const{tr:r}=t;return!!(n==null?void 0:n(xr(e.index,e.pos)(r)))});k(Kt,{displayName:"Command<selectColCommand>",group:"Table"});const Gt=M("SelectTable",()=>()=>(e,t)=>{const{tr:n}=e;return!!(t==null?void 0:t(Cr(n)))});k(Gt,{displayName:"Command<selectTableCommand>",group:"Table"});const Vt=M("DeleteSelectedCells",()=>()=>(e,t)=>{const{selection:n}=e;if(!(n instanceof S))return!1;const r=n.isRowSelection(),o=n.isColSelection();return r&&o?br(e,t):o?fr(e,t):pr(e,t)});k(Vt,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const qt=M("AddColBefore",()=>()=>ar);k(qt,{displayName:"Command<addColBeforeCommand>",group:"Table"});const Ut=M("AddColAfter",()=>()=>cr);k(Ut,{displayName:"Command<addColAfterCommand>",group:"Table"});const Jt=M("AddRowBefore",e=>()=>(t,n)=>{if(!D(t))return!1;if(n){const r=H(t);n(Lt(e,t.tr,r,r.top))}return!0});k(Jt,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const Xt=M("AddRowAfter",e=>()=>(t,n)=>{if(!D(t))return!1;if(n){const r=H(t);n(Lt(e,t.tr,r,r.bottom))}return!0});k(Xt,{displayName:"Command<addRowAfterCommand>",group:"Table"});const Zt=M("SetAlign",()=>(e="left")=>dr("alignment",e));k(Zt,{displayName:"Command<setAlignCommand>",group:"Table"});const Qt=Ie(e=>new Rt(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(t,n,r,o)=>{var a,c;const i=t.doc.resolve(r);if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),Y.type(e)))return null;const l=It(e,Number((a=n.groups)==null?void 0:a.row),Number((c=n.groups)==null?void 0:c.col)),s=t.tr.replaceRangeWith(r,o,l);return s.setSelection(B.create(s.doc,r+3)).scrollIntoView()}));k(Qt,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const Ue=yt("tableKeymap",{NextCell:{shortcuts:["Mod-]","Tab"],command:e=>{const t=e.get(de);return()=>t.call(Ve.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:e=>{const t=e.get(de);return()=>t.call(Ge.key)}},ExitTable:{shortcuts:["Mod-Enter"],command:e=>{const t=e.get(de);return()=>t.call(qe.key)}}});k(Ue.ctx,{displayName:"KeymapCtx<table>",group:"Table"});k(Ue.shortcuts,{displayName:"Keymap<table>",group:"Table"});const Ae="footnote_definition",mt="footnoteDefinition",Je=G("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:""}},parseDOM:[{tag:`dl[data-type="${Ae}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw _e(e);return{label:e.dataset.label}},contentElement:"dd"}],toDOM:e=>{const t=e.attrs.label;return["dl",{"data-label":t,"data-type":Ae},["dt",t],["dd",0]]},parseMarkdown:{match:({type:e})=>e===mt,runner:(e,t,n)=>{e.openNode(n,{label:t.label}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===Ae,runner:(e,t)=>{e.openNode(mt,void 0,{label:t.attrs.label,identifier:t.attrs.label}).next(t.content).closeNode()}}}));k(Je.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});k(Je.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const Re="footnote_reference",Xe=G("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:""}},parseDOM:[{tag:`sup[data-type="${Re}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw _e(e);return{label:e.dataset.label}}}],toDOM:e=>{const t=e.attrs.label;return["sup",{"data-label":t,"data-type":Re},t]},parseMarkdown:{match:({type:e})=>e==="footnoteReference",runner:(e,t,n)=>{e.addNode(n,{label:t.label})}},toMarkdown:{match:e=>e.type.name===Re,runner:(e,t)=>{e.addNode("footnoteReference",void 0,void 0,{label:t.attrs.label,identifier:t.attrs.label})}}}));k(Xe.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});k(Xe.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const Yt=Tn.extendSchema(e=>t=>{const n=e(t);return{...n,attrs:{...n.attrs,checked:{default:null}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw _e(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...(n==null?void 0:n.parseDOM)||[]],toDOM:r=>n.toDOM&&r.attrs.checked==null?n.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,o,i)=>{if(o.checked==null){n.parseMarkdown.runner(r,o,i);return}const l=o.label!=null?`${o.label}.`:"â€¢",s=o.checked!=null?!!o.checked:null,a=o.label!=null?"ordered":"bullet",c=o.spread!=null?`${o.spread}`:"true";r.openNode(i,{label:l,listType:a,spread:c,checked:s}),r.next(o.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,o)=>{if(o.attrs.checked==null){n.toMarkdown.runner(r,o);return}const i=o.attrs.label,l=o.attrs.listType,s=o.attrs.spread==="true",a=o.attrs.checked;r.openNode("listItem",void 0,{label:i,listType:l,spread:s,checked:a}),r.next(o.content),r.closeNode()}}}});k(Yt,{displayName:"NodeSchema<listItem>",group:"ListItem"});const en=Ie(()=>new Rt(/^\[(?<checked>\s|x)\]\s$/,(e,t,n,r)=>{var f;const o=e.doc.resolve(n);let i=0,l=o.node(i);for(;l&&l.type.name!=="list_item";)i--,l=o.node(i);if(!l||l.attrs.checked!=null)return null;const s=((f=t.groups)==null?void 0:f.checked)==="x",a=o.before(i),c=e.tr;return c.deleteRange(n,r).setNodeMarkup(a,void 0,{...l.attrs,checked:s}),c}));k(en,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const Mr=[He,Ue].flat(),Nr=[Qt,en],Dr=[Mt];var ge=typeof navigator<"u"?navigator:null,Ze=ge&&ge.userAgent||"",vr=/Edge\/(\d+)/.exec(Ze),Fr=/MSIE \d/.exec(Ze),zr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ze),Er=!!(Fr||zr||vr),Ir=!Er&&!!ge&&/Apple Computer/.test(ge.vendor),X=new re("safari-ime-span"),Lr={key:X,state:{init:()=>!1,apply:(e,t)=>{const n=e.getMeta(X);return n??t}},props:{decorations:_r,handleDOMEvents:{compositionstart:e=>{e.dispatch(e.state.tr.setMeta(X,!0))},compositionend:e=>{e.dispatch(e.state.tr.setMeta(X,!1))}}}};function _r(e){const{$from:t,$to:n,to:r}=e.selection;if(X.getState(e)&&t.sameParent(n)){const i=xt.widget(r,Pr,{ignoreSelection:!0,key:"safari-ime-span"});return St.create(e.doc,[i])}}function Pr(e){const t=e.dom.ownerDocument.createElement("span");return t.className="ProseMirror-safari-ime-span",t}var Or=new Le(Ir?Lr:{key:X});const tn=Pe(()=>Or);k(tn,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const nn=Pe(()=>wr({allowTableNodeSelection:!0}));k(nn,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});function gt(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;o!==-1;)r++,o=n.indexOf(t,o+t.length);return r}function $r(e,t,n){const o=Mn((n||{}).ignore||[]),i=Br(t);let l=-1;for(;++l<i.length;)Nn(e,"text",s);function s(c,f){let u=-1,p;for(;++u<f.length;){const d=f[u],h=p?p.children:void 0;if(o(d,h?h.indexOf(d):void 0,p))return;p=d}if(p)return a(c,f)}function a(c,f){const u=f[f.length-1],p=i[l][0],d=i[l][1];let h=0;const g=u.children.indexOf(c);let w=!1,C=[];p.lastIndex=0;let y=p.exec(c.value);for(;y;){const A=y.index,R={index:y.index,input:y.input,stack:[...f,c]};let T=d(...y,R);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?p.lastIndex=A+1:(h!==A&&C.push({type:"text",value:c.value.slice(h,A)}),Array.isArray(T)?C.push(...T):T&&C.push(T),h=A+y[0].length,w=!0),!p.global)break;y=p.exec(c.value)}return w?(h<c.value.length&&C.push({type:"text",value:c.value.slice(h)}),u.children.splice(g,1,...C)):C=[c],g+C.length}}function Br(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const o=n[r];t.push([jr(o[0]),Hr(o[1])])}return t}function jr(e){return typeof e=="string"?new RegExp(Dn(e),"g"):e}function Hr(e){return typeof e=="function"?e:function(){return e}}const Te="phrasing",Me=["autolink","link","image","label"];function Wr(){return{transforms:[Xr],enter:{literalAutolink:Gr,literalAutolinkEmail:Ne,literalAutolinkHttp:Ne,literalAutolinkWww:Ne},exit:{literalAutolink:Jr,literalAutolinkEmail:Ur,literalAutolinkHttp:Vr,literalAutolinkWww:qr}}}function Kr(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Te,notInConstruct:Me},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Te,notInConstruct:Me},{character:":",before:"[ps]",after:"\\/",inConstruct:Te,notInConstruct:Me}]}}function Gr(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ne(e){this.config.enter.autolinkProtocol.call(this,e)}function Vr(e){this.config.exit.autolinkProtocol.call(this,e)}function qr(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];Q(t.type==="link"),t.url="http://"+this.sliceSerialize(e)}function Ur(e){this.config.exit.autolinkEmail.call(this,e)}function Jr(e){this.exit(e)}function Xr(e){$r(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Zr],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,Qr]],{ignore:["link","linkReference"]})}function Zr(e,t,n,r,o){let i="";if(!rn(o)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!Yr(n)))return!1;const l=eo(n+r);if(!l[0])return!1;const s={type:"link",title:null,url:i+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[s,{type:"text",value:l[1]}]:s}function Qr(e,t,n,r){return!rn(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Yr(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function eo(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const o=gt(e,"(");let i=gt(e,")");for(;r!==-1&&o>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function rn(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Z(n)||Oe(n))&&(!t||n!==47)}on.peek=fo;function to(){return{enter:{gfmFootnoteDefinition:ro,gfmFootnoteDefinitionLabelString:oo,gfmFootnoteCall:so,gfmFootnoteCallString:ao},exit:{gfmFootnoteDefinition:io,gfmFootnoteDefinitionLabelString:lo,gfmFootnoteCall:uo,gfmFootnoteCallString:co}}}function no(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:ho,footnoteReference:on}}}function ro(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function oo(){this.buffer()}function lo(e){const t=this.resume(),n=this.stack[this.stack.length-1];Q(n.type==="footnoteDefinition"),n.label=t,n.identifier=oe(this.sliceSerialize(e)).toLowerCase()}function io(e){this.exit(e)}function so(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ao(){this.buffer()}function co(e){const t=this.resume(),n=this.stack[this.stack.length-1];Q(n.type==="footnoteReference"),n.label=t,n.identifier=oe(this.sliceSerialize(e)).toLowerCase()}function uo(e){this.exit(e)}function on(e,t,n,r){const o=n.createTracker(r);let i=o.move("[^");const l=n.enter("footnoteReference"),s=n.enter("reference");return i+=o.move(n.safe(n.associationId(e),{...o.current(),before:i,after:"]"})),s(),l(),i+=o.move("]"),i}function fo(){return"["}function ho(e,t,n,r){const o=n.createTracker(r);let i=o.move("[^");const l=n.enter("footnoteDefinition"),s=n.enter("label");return i+=o.move(n.safe(n.associationId(e),{...o.current(),before:i,after:"]"})),s(),i+=o.move("]:"+(e.children&&e.children.length>0?" ":"")),o.shift(4),i+=o.move(n.indentLines(n.containerFlow(e,o.current()),po)),l(),i}function po(e,t,n){return t===0?e:(n?"":"    ")+e}const mo=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ln.peek=Co;function go(){return{canContainEols:["delete"],enter:{strikethrough:wo},exit:{strikethrough:ko}}}function bo(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:mo}],handlers:{delete:ln}}}function wo(e){this.enter({type:"delete",children:[]},e)}function ko(e){this.exit(e)}function ln(e,t,n,r){const o=n.createTracker(r),i=n.enter("strikethrough");let l=o.move("~~");return l+=n.containerPhrasing(e,{...o.current(),before:l,after:"~"}),l+=o.move("~~"),i(),l}function Co(){return"~"}function yo(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||So,o=[],i=[],l=[],s=[];let a=0,c=-1;for(;++c<e.length;){const h=[],b=[];let g=-1;for(e[c].length>a&&(a=e[c].length);++g<e[c].length;){const w=xo(e[c][g]);if(t.alignDelimiters!==!1){const C=r(w);b[g]=C,(s[g]===void 0||C>s[g])&&(s[g]=C)}h.push(w)}i[c]=h,l[c]=b}let f=-1;if(typeof n=="object"&&"length"in n)for(;++f<a;)o[f]=bt(n[f]);else{const h=bt(n);for(;++f<a;)o[f]=h}f=-1;const u=[],p=[];for(;++f<a;){const h=o[f];let b="",g="";h===99?(b=":",g=":"):h===108?b=":":h===114&&(g=":");let w=t.alignDelimiters===!1?1:Math.max(1,s[f]-b.length-g.length);const C=b+"-".repeat(w)+g;t.alignDelimiters!==!1&&(w=b.length+w+g.length,w>s[f]&&(s[f]=w),p[f]=w),u[f]=C}i.splice(1,0,u),l.splice(1,0,p),c=-1;const d=[];for(;++c<i.length;){const h=i[c],b=l[c];f=-1;const g=[];for(;++f<a;){const w=h[f]||"";let C="",y="";if(t.alignDelimiters!==!1){const A=s[f]-(b[f]||0),R=o[f];R===114?C=" ".repeat(A):R===99?A%2?(C=" ".repeat(A/2+.5),y=" ".repeat(A/2-.5)):(C=" ".repeat(A/2),y=C):y=" ".repeat(A)}t.delimiterStart!==!1&&!f&&g.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&w==="")&&(t.delimiterStart!==!1||f)&&g.push(" "),t.alignDelimiters!==!1&&g.push(C),g.push(w),t.alignDelimiters!==!1&&g.push(y),t.padding!==!1&&g.push(" "),(t.delimiterEnd!==!1||f!==a-1)&&g.push("|")}d.push(t.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return d.join(`
`)}function xo(e){return e==null?"":String(e)}function So(e){return e.length}function bt(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Ao(){return{enter:{table:Ro,tableData:wt,tableHeader:wt,tableRow:Mo},exit:{codeText:No,table:To,tableData:De,tableHeader:De,tableRow:De}}}function Ro(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function To(e){this.exit(e),this.data.inTable=void 0}function Mo(e){this.enter({type:"tableRow",children:[]},e)}function De(e){this.exit(e)}function wt(e){this.enter({type:"tableCell",children:[]},e)}function No(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Do));const n=this.stack[this.stack.length-1];Q(n.type==="inlineCode"),n.value=t,this.exit(e)}function Do(e,t){return t==="|"?t:e}function vo(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:l,tableCell:a,tableRow:s}};function l(d,h,b,g){return c(f(d,b,g),d.align)}function s(d,h,b,g){const w=u(d,b,g),C=c([w]);return C.slice(0,C.indexOf(`
`))}function a(d,h,b,g){const w=b.enter("tableCell"),C=b.enter("phrasing"),y=b.containerPhrasing(d,{...g,before:i,after:i});return C(),w(),y}function c(d,h){return yo(d,{align:h,alignDelimiters:r,padding:n,stringLength:o})}function f(d,h,b){const g=d.children;let w=-1;const C=[],y=h.enter("table");for(;++w<g.length;)C[w]=u(g[w],h,b);return y(),C}function u(d,h,b){const g=d.children;let w=-1;const C=[],y=h.enter("tableRow");for(;++w<g.length;)C[w]=a(g[w],d,h,b);return y(),C}function p(d,h,b){let g=Tt.inlineCode(d,h,b);return b.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function Fo(){return{exit:{taskListCheckValueChecked:kt,taskListCheckValueUnchecked:kt,paragraph:Eo}}}function zo(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Io}}}function kt(e){const t=this.stack[this.stack.length-2];Q(t.type==="listItem"),t.checked=e.type==="taskListCheckValueChecked"}function Eo(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];Q(n.type==="paragraph");const r=n.children[0];if(r&&r.type==="text"){const o=t.children;let i=-1,l;for(;++i<o.length;){const s=o[i];if(s.type==="paragraph"){l=s;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Io(e,t,n,r){const o=e.children[0],i=typeof e.checked=="boolean"&&o&&o.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);i&&s.move(l);let a=Tt.listItem(e,t,n,{...r,...s.current()});return i&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),a;function c(f){return f+l}}function Lo(){return[Wr(),to(),go(),Ao(),Fo()]}function _o(e){return{extensions:[Kr(),no(),bo(),vo(e),zo()]}}const Po={tokenize:Wo,partial:!0},sn={tokenize:Ko,partial:!0},an={tokenize:Go,partial:!0},cn={tokenize:Vo,partial:!0},Oo={tokenize:qo,partial:!0},un={tokenize:jo,previous:hn},fn={tokenize:Ho,previous:pn},_={tokenize:Bo,previous:dn},E={};function $o(){return{text:E}}let W=48;for(;W<123;)E[W]=_,W++,W===58?W=65:W===91&&(W=97);E[43]=_;E[45]=_;E[46]=_;E[95]=_;E[72]=[_,fn];E[104]=[_,fn];E[87]=[_,un];E[119]=[_,un];function Bo(e,t,n){const r=this;let o,i;return l;function l(u){return!Ee(u)||!dn.call(r,r.previous)||Qe(r.events)?n(u):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(u))}function s(u){return Ee(u)?(e.consume(u),s):u===64?(e.consume(u),a):n(u)}function a(u){return u===46?e.check(Oo,f,c)(u):u===45||u===95||$e(u)?(i=!0,e.consume(u),a):f(u)}function c(u){return e.consume(u),o=!0,a}function f(u){return i&&o&&ne(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(u)):n(u)}}function jo(e,t,n){const r=this;return o;function o(l){return l!==87&&l!==119||!hn.call(r,r.previous)||Qe(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Po,e.attempt(sn,e.attempt(an,i),n),n)(l))}function i(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function Ho(e,t,n){const r=this;let o="",i=!1;return l;function l(u){return(u===72||u===104)&&pn.call(r,r.previous)&&!Qe(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(u),e.consume(u),s):n(u)}function s(u){if(ne(u)&&o.length<5)return o+=String.fromCodePoint(u),e.consume(u),s;if(u===58){const p=o.toLowerCase();if(p==="http"||p==="https")return e.consume(u),a}return n(u)}function a(u){return u===47?(e.consume(u),i?c:(i=!0,a)):n(u)}function c(u){return u===null||vn(u)||N(u)||Z(u)||Oe(u)?n(u):e.attempt(sn,e.attempt(an,f),n)(u)}function f(u){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(u)}}function Wo(e,t,n){let r=0;return o;function o(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),o):l===46&&r===3?(e.consume(l),i):n(l)}function i(l){return l===null?n(l):t(l)}}function Ko(e,t,n){let r,o,i;return l;function l(c){return c===46||c===95?e.check(cn,a,s)(c):c===null||N(c)||Z(c)||c!==45&&Oe(c)?a(c):(i=!0,e.consume(c),l)}function s(c){return c===95?r=!0:(o=r,r=void 0),e.consume(c),l}function a(c){return o||r||!i?n(c):t(c)}}function Go(e,t){let n=0,r=0;return o;function o(l){return l===40?(n++,e.consume(l),o):l===41&&r<n?i(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(cn,t,i)(l):l===null||N(l)||Z(l)?t(l):(e.consume(l),o)}function i(l){return l===41&&r++,e.consume(l),o}}function Vo(e,t,n){return r;function r(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(e.consume(s),r):s===38?(e.consume(s),i):s===93?(e.consume(s),o):s===60||s===null||N(s)||Z(s)?t(s):n(s)}function o(s){return s===null||s===40||s===91||N(s)||Z(s)?t(s):r(s)}function i(s){return ne(s)?l(s):n(s)}function l(s){return s===59?(e.consume(s),r):ne(s)?(e.consume(s),l):n(s)}}function qo(e,t,n){return r;function r(i){return e.consume(i),o}function o(i){return $e(i)?n(i):t(i)}}function hn(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||N(e)}function pn(e){return!ne(e)}function dn(e){return!(e===47||Ee(e))}function Ee(e){return e===43||e===45||e===46||e===95||$e(e)}function Qe(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Uo={tokenize:nl,partial:!0};function Jo(){return{document:{91:{tokenize:Yo,continuation:{tokenize:el},exit:tl}},text:{91:{tokenize:Qo},93:{add:"after",tokenize:Xo,resolveTo:Zo}}}}function Xo(e,t,n){const r=this;let o=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;o--;){const a=r.events[o][1];if(a.type==="labelImage"){l=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return s;function s(a){if(!l||!l._balanced)return n(a);const c=oe(r.sliceSerialize({start:l.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(a):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),t(a))}}function Zo(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",i,t],["enter",l,t],["exit",l,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...s),e}function Qo(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,l;return s;function s(u){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),a}function a(u){return u!==94?n(u):(e.enter("gfmFootnoteCallMarker"),e.consume(u),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(u){if(i>999||u===93&&!l||u===null||u===91||N(u))return n(u);if(u===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return o.includes(oe(r.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(u)}return N(u)||(l=!0),i++,e.consume(u),u===92?f:c}function f(u){return u===91||u===92||u===93?(e.consume(u),i++,c):c(u)}}function Yo(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,l=0,s;return a;function a(h){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(h){return h===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(h)}function f(h){if(l>999||h===93&&!s||h===null||h===91||N(h))return n(h);if(h===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return i=oe(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(h),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return N(h)||(s=!0),l++,e.consume(h),h===92?u:f}function u(h){return h===91||h===92||h===93?(e.consume(h),l++,f):f(h)}function p(h){return h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),o.includes(i)||o.push(i),O(e,d,"gfmFootnoteDefinitionWhitespace")):n(h)}function d(h){return t(h)}}function el(e,t,n){return e.check(Fn,t,e.attempt(Uo,t,n))}function tl(e){e.exit("gfmFootnoteDefinition")}function nl(e,t,n){const r=this;return O(e,o,"gfmFootnoteDefinitionIndent",5);function o(i){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(i):n(i)}}function rl(e){let n=(e||{}).singleTilde;const r={tokenize:i,resolveAll:o};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function o(l,s){let a=-1;for(;++a<l.length;)if(l[a][0]==="enter"&&l[a][1].type==="strikethroughSequenceTemporary"&&l[a][1]._close){let c=a;for(;c--;)if(l[c][0]==="exit"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._open&&l[a][1].end.offset-l[a][1].start.offset===l[c][1].end.offset-l[c][1].start.offset){l[a][1].type="strikethroughSequence",l[c][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},l[c][1].start),end:Object.assign({},l[a][1].end)},u={type:"strikethroughText",start:Object.assign({},l[c][1].end),end:Object.assign({},l[a][1].start)},p=[["enter",f,s],["enter",l[c][1],s],["exit",l[c][1],s],["enter",u,s]],d=s.parser.constructs.insideSpan.null;d&&xe(p,p.length,0,zn(d,l.slice(c+1,a),s)),xe(p,p.length,0,[["exit",u,s],["enter",l[a][1],s],["exit",l[a][1],s],["exit",f,s]]),xe(l,c-1,a-c+3,p),a=c+p.length-2;break}}for(a=-1;++a<l.length;)l[a][1].type==="strikethroughSequenceTemporary"&&(l[a][1].type="data");return l}function i(l,s,a){const c=this.previous,f=this.events;let u=0;return p;function p(h){return c===126&&f[f.length-1][1].type!=="characterEscape"?a(h):(l.enter("strikethroughSequenceTemporary"),d(h))}function d(h){const b=rt(c);if(h===126)return u>1?a(h):(l.consume(h),u++,d);if(u<2&&!n)return a(h);const g=l.exit("strikethroughSequenceTemporary"),w=rt(h);return g._open=!w||w===2&&!!b,g._close=!b||b===2&&!!w,s(h)}}}class ol{constructor(){this.map=[]}add(t,n,r){ll(this,t,n,r)}consume(t){if(this.map.sort(function(i,l){return i[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push([...t]),t.length=0;let o=r.pop();for(;o;)t.push(...o),o=r.pop();this.map.length=0}}function ll(e,t,n,r){let o=0;if(!(n===0&&r.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...r);return}o+=1}e.map.push([t,n,r])}}function il(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function sl(){return{flow:{null:{tokenize:al,resolveAll:cl}}}}function al(e,t,n){const r=this;let o=0,i=0,l;return s;function s(m){let ee=r.events.length-1;for(;ee>-1;){const nt=r.events[ee][1].type;if(nt==="lineEnding"||nt==="linePrefix")ee--;else break}const et=ee>-1?r.events[ee][1].type:null,tt=et==="tableHead"||et==="tableRow"?T:a;return tt===T&&r.parser.lazy[r.now().line]?n(m):tt(m)}function a(m){return e.enter("tableHead"),e.enter("tableRow"),c(m)}function c(m){return m===124||(l=!0,i+=1),f(m)}function f(m){return m===null?n(m):te(m)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):n(m):V(m)?O(e,f,"whitespace")(m):(i+=1,l&&(l=!1,o+=1),m===124?(e.enter("tableCellDivider"),e.consume(m),e.exit("tableCellDivider"),l=!0,f):(e.enter("data"),u(m)))}function u(m){return m===null||m===124||N(m)?(e.exit("data"),f(m)):(e.consume(m),m===92?p:u)}function p(m){return m===92||m===124?(e.consume(m),u):u(m)}function d(m){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(m):(e.enter("tableDelimiterRow"),l=!1,V(m)?O(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):h(m))}function h(m){return m===45||m===58?g(m):m===124?(l=!0,e.enter("tableCellDivider"),e.consume(m),e.exit("tableCellDivider"),b):R(m)}function b(m){return V(m)?O(e,g,"whitespace")(m):g(m)}function g(m){return m===58?(i+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(m),e.exit("tableDelimiterMarker"),w):m===45?(i+=1,w(m)):m===null||te(m)?A(m):R(m)}function w(m){return m===45?(e.enter("tableDelimiterFiller"),C(m)):R(m)}function C(m){return m===45?(e.consume(m),C):m===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(m),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(m))}function y(m){return V(m)?O(e,A,"whitespace")(m):A(m)}function A(m){return m===124?h(m):m===null||te(m)?!l||o!==i?R(m):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(m)):R(m)}function R(m){return n(m)}function T(m){return e.enter("tableRow"),z(m)}function z(m){return m===124?(e.enter("tableCellDivider"),e.consume(m),e.exit("tableCellDivider"),z):m===null||te(m)?(e.exit("tableRow"),t(m)):V(m)?O(e,z,"whitespace")(m):(e.enter("data"),P(m))}function P(m){return m===null||m===124||N(m)?(e.exit("data"),z(m)):(e.consume(m),m===92?gn:P)}function gn(m){return m===92||m===124?(e.consume(m),P):P(m)}}function cl(e,t){let n=-1,r=!0,o=0,i=[0,0,0,0],l=[0,0,0,0],s=!1,a=0,c,f,u;const p=new ol;for(;++n<e.length;){const d=e[n],h=d[1];d[0]==="enter"?h.type==="tableHead"?(s=!1,a!==0&&(Ct(p,t,a,c,f),f=void 0,a=0),c={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},p.add(n,0,[["enter",c,t]])):h.type==="tableRow"||h.type==="tableDelimiterRow"?(r=!0,u=void 0,i=[0,0,0,0],l=[0,n+1,0,0],s&&(s=!1,f={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},p.add(n,0,[["enter",f,t]])),o=h.type==="tableDelimiterRow"?2:f?3:1):o&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(i[1]!==0&&(l[0]=l[1],u=pe(p,t,i,o,void 0,u),i=[0,0,0,0]),l[2]=n)):h.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(l[0]=l[1],u=pe(p,t,i,o,void 0,u)),i=l,l=[i[1],n,0,0])):h.type==="tableHead"?(s=!0,a=n):h.type==="tableRow"||h.type==="tableDelimiterRow"?(a=n,i[1]!==0?(l[0]=l[1],u=pe(p,t,i,o,n,u)):l[1]!==0&&(u=pe(p,t,l,o,n,u)),o=0):o&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")&&(l[3]=n)}for(a!==0&&Ct(p,t,a,c,f),p.consume(t.events),n=-1;++n<t.events.length;){const d=t.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=il(t.events,n))}return e}function pe(e,t,n,r,o,i){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(i.end=Object.assign({},J(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const a=J(t.events,n[1]);if(i={type:l,start:Object.assign({},a),end:Object.assign({},a)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const c=J(t.events,n[2]),f=J(t.events,n[3]),u={type:s,start:Object.assign({},c),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",u,t]]),r!==2){const p=t.events[n[2]],d=t.events[n[3]];if(p[1].end=Object.assign({},d[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const h=n[2]+1,b=n[3]-n[2]-1;e.add(h,b,[])}}e.add(n[3]+1,0,[["exit",u,t]])}return o!==void 0&&(i.end=Object.assign({},J(t.events,o)),e.add(o,0,[["exit",i,t]]),i=void 0),i}function Ct(e,t,n,r,o){const i=[],l=J(t.events,n);o&&(o.end=Object.assign({},l),i.push(["exit",o,t])),r.end=Object.assign({},l),i.push(["exit",r,t]),e.add(n+1,0,i)}function J(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const ul={tokenize:hl};function fl(){return{text:{91:ul}}}function hl(e,t,n){const r=this;return o;function o(a){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(a):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(a),e.exit("taskListCheckMarker"),i)}function i(a){return N(a)?(e.enter("taskListCheckValueUnchecked"),e.consume(a),e.exit("taskListCheckValueUnchecked"),l):a===88||a===120?(e.enter("taskListCheckValueChecked"),e.consume(a),e.exit("taskListCheckValueChecked"),l):n(a)}function l(a){return a===93?(e.enter("taskListCheckMarker"),e.consume(a),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(a)}function s(a){return te(a)?t(a):V(a)?e.check({tokenize:pl},t,n)(a):n(a)}}function pl(e,t,n){return O(e,r,"whitespace");function r(o){return o===null?n(o):t(o)}}function dl(e){return En([$o(),Jo(),rl(e),sl(),fl()])}const ml={};function gl(e){const t=this,n=e||ml,r=t.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(dl(n)),i.push(Lo()),l.push(_o(n))}const Ye=In("remarkGFM",()=>gl);k(Ye.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});k(Ye.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const bl=new re("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function wl(e,t){let n=0;return t.forEach((r,o,i)=>{r===e&&(n=i)}),n}const mn=Pe(()=>new Le({key:bl,appendTransaction:(e,t,n)=>{let r;const o=(i,l)=>{if(r||(r=n.tr),i.type.name!=="table_cell")return;const s=n.doc.resolve(l),a=s.node(s.depth),f=s.node(s.depth-1).firstChild;if(!f)return;const u=wl(i,a),p=f.maybeChild(u);if(!p)return;const d=p.attrs.alignment,h=i.attrs.alignment;d!==h&&r.setNodeMarkup(l,void 0,{...i.attrs,alignment:d})};return t.doc!==n.doc&&n.doc.descendants(o),r}}));k(mn,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const kl=[mn,tn,Ye,nn].flat(),Cl=[Yt,Y,Ce,se,ye,ae,Je,Xe,Be,le].flat(),yl=[Ve,Ge,qe,Bt,jt,Ht,Wt,Kt,Gt,Vt,Jt,Xt,qt,Ut,Zt,je],Al=[Cl,Nr,Dr,Mr,yl,kl].flat();export{Al as g,Bt as i,Dr as m};
